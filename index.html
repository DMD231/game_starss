<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lucky Penguin Casino</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #0d6efd;
            --primary-dark: #0b5ed7;
            --success: #198754;
            --danger: #dc3545;
            --warning: #ffc107;
            --dark: #212529;
            --darker: #121416;
            --light: #f8f9fa;
            --casino-gold: #ffd700;
            --casino-red: #dc3545;
            --casino-green: #198754;
            --casino-purple: #6f42c1;
            --shadow: 0 10px 30px rgba(0,0,0,0.3);
            --radius: 16px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
            overscroll-behavior: none;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 10px;
            width: 100%;
        }

        /* Header - Mobile First */
        .header {
            background: rgba(13, 110, 253, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 12px 15px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, var(--casino-red), var(--casino-gold), var(--casino-green));
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            justify-content: center;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            min-width: 45px;
            background: linear-gradient(135deg, var(--casino-red), var(--casino-gold));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
        }

        .logo-text {
            text-align: center;
            flex: 1;
        }

        .logo-text h1 {
            font-size: 18px;
            font-weight: 800;
            background: linear-gradient(to right, var(--casino-gold), var(--light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2px;
            line-height: 1.2;
        }

        .logo-text p {
            font-size: 9px;
            opacity: 0.8;
            letter-spacing: 0.5px;
        }

        .stats {
            display: flex;
            gap: 8px;
            width: 100%;
            justify-content: center;
            flex-wrap: wrap;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px 12px;
            text-align: center;
            min-width: 90px;
            flex: 1;
            max-width: 120px;
            transition: var(--transition);
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--casino-gold);
            margin-bottom: 2px;
            line-height: 1;
        }

        .stat-label {
            font-size: 9px;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Mobile Burger Menu */
        .mobile-menu-toggle {
            display: flex;
            position: fixed;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            width: 40px;
            height: 40px;
            color: white;
            font-size: 18px;
            cursor: pointer;
            z-index: 1001;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
            width: 100%;
        }

        /* Sidebar */
        .sidebar {
            background: rgba(13, 110, 253, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 15px;
            height: fit-content;
            box-shadow: var(--shadow);
            width: 100%;
            display: none;
            position: fixed;
            top: 70px;
            left: 15px;
            right: 15px;
            z-index: 1000;
            max-height: calc(100vh - 100px);
            overflow-y: auto;
        }

        .sidebar.active {
            display: block;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .avatar {
            width: 45px;
            height: 45px;
            min-width: 45px;
            background: linear-gradient(135deg, var(--casino-purple), var(--primary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: white;
            box-shadow: 0 5px 15px rgba(111, 66, 193, 0.4);
        }

        .user-info h3 {
            font-size: 15px;
            margin-bottom: 3px;
        }

        .user-info p {
            font-size: 10px;
            opacity: 0.7;
        }

        .menu {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .menu-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px 6px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid transparent;
            border-radius: 10px;
            color: var(--light);
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            min-height: 65px;
        }

        .menu-btn i {
            font-size: 16px;
            min-height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--casino-purple));
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
        }

        .bonus-box {
            background: linear-gradient(135deg, var(--casino-red), #fd7e14);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            margin-top: 12px;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        .bonus-box h3 {
            font-size: 13px;
            margin-bottom: 6px;
        }

        .bonus-btn {
            background: var(--casino-gold);
            color: var(--dark);
            border: none;
            border-radius: 18px;
            padding: 8px 12px;
            font-size: 11px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .bonus-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Content Area */
        .content-area {
            width: 100%;
        }

        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 12px;
            width: 100%;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
            box-shadow: var(--shadow);
            min-height: 180px;
            display: flex;
            flex-direction: column;
        }

        .game-header {
            padding: 12px;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .game-icon {
            font-size: 32px;
            margin-bottom: 8px;
            color: var(--casino-gold);
            min-height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--light);
            line-height: 1.2;
        }

        .game-description {
            font-size: 11px;
            opacity: 0.8;
            line-height: 1.3;
            margin-bottom: 10px;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .game-stat {
            text-align: center;
        }

        .stat-val {
            font-size: 13px;
            font-weight: 700;
            color: var(--casino-gold);
            line-height: 1;
            margin-bottom: 2px;
        }

        .stat-label {
            font-size: 9px;
            opacity: 0.7;
            text-transform: uppercase;
            line-height: 1;
        }

        /* Game Pages */
        .game-page {
            display: none;
            animation: fadeIn 0.3s ease;
            width: 100%;
        }

        .game-page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .game-header-page {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius);
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .game-header-page h2 {
            font-size: 16px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .game-header-page p {
            font-size: 12px;
            opacity: 0.8;
        }

        .game-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 350px;
            width: 100%;
            overflow-x: hidden;
        }

        /* Slots */
        .slots-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .slots-machine {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 15px 0;
            width: 100%;
            max-width: 320px;
        }

        .slot-reel {
            width: 70px;
            height: 85px;
            background: linear-gradient(135deg, var(--casino-purple), var(--primary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            font-weight: 700;
            color: white;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5), 0 4px 8px rgba(0,0,0,0.3);
            position: relative;
            flex: 1;
            max-width: 85px;
            overflow: hidden;
        }

        .slot-reel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            pointer-events: none;
        }

        .bet-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: var(--radius);
            border: 1px solid rgba(255,255,255,0.1);
            width: 100%;
            max-width: 320px;
            justify-content: center;
        }

        .bet-amount {
            font-size: 20px;
            font-weight: 700;
            color: var(--casino-gold);
            min-width: 70px;
            text-align: center;
        }

        .btn-control {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            border: none;
            color: white;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .spin-btn {
            background: linear-gradient(135deg, var(--casino-red), #fd7e14);
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            font-size: 14px;
            font-weight: 800;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            letter-spacing: 1px;
            text-transform: uppercase;
            width: 100%;
            max-width: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        /* Roulette - Complete Fix */
        .roulette-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .roulette-wheel-container {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 15px auto;
        }

        .roulette-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 0 8px 15px rgba(0,0,0,0.4);
            border: 6px solid var(--casino-gold);
            transition: transform 5s cubic-bezier(0.1, 0.7, 0.1, 1);
            background: radial-gradient(circle at center, #333 0%, #111 100%);
        }

        .roulette-wheel-inner {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            background: #2a5298;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 700;
            z-index: 1;
        }

        .roulette-number {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 12px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        }

        .roulette-number span {
            transform: rotate(90deg);
            margin-left: -15px;
            margin-top: 10px;
        }

        .roulette-pointer {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 25px;
            background: var(--casino-red);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
        }

        .betting-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
            width: 100%;
            max-width: 350px;
            margin: 0 auto;
        }

        .bet-cell {
            padding: 8px 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 700;
            border: 2px solid transparent;
            font-size: 10px;
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .bet-cell.selected {
            background: var(--casino-gold);
            color: var(--dark);
            border-color: white;
            box-shadow: 0 0 10px rgba(255,215,0,0.5);
            transform: scale(1.05);
        }

        .betting-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            max-width: 320px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Blackjack */
        .blackjack-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .cards-area {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            width: 100%;
        }

        .player-area, .dealer-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            width: 100%;
        }

        .card-hand {
            display: flex;
            gap: 4px;
            min-height: 80px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .card {
            width: 55px;
            height: 82px;
            background: white;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 700;
            color: var(--dark);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            position: relative;
            flex-shrink: 0;
        }

        .card.red {
            color: var(--casino-red);
        }

        .card-back {
            background: linear-gradient(135deg, var(--primary), var(--casino-purple));
            color: transparent;
        }

        .card-back::before {
            content: '?';
            position: absolute;
            color: rgba(255,255,255,0.3);
            font-size: 24px;
        }

        .blackjack-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            width: 100%;
            max-width: 350px;
        }

        .game-btn {
            padding: 10px 12px;
            border: none;
            border-radius: 18px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .game-btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--casino-purple));
            color: white;
        }

        .game-btn.success {
            background: linear-gradient(135deg, var(--casino-green), #20c997);
            color: white;
        }

        .game-btn.danger {
            background: linear-gradient(135deg, var(--casino-red), #fd7e14);
            color: white;
        }

        .game-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Dice */
        .dice-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .dice-area {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            justify-content: center;
        }

        .dice {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 12px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            padding: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .dot {
            width: 12px;
            height: 12px;
            background: var(--casino-red);
            border-radius: 50%;
            justify-self: center;
            align-self: center;
        }

        .dice-result {
            font-size: 32px;
            font-weight: 800;
            color: var(--casino-gold);
            text-align: center;
        }

        /* History */
        .history-table-container {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius);
            overflow: hidden;
            font-size: 11px;
            min-width: 500px;
        }

        .history-table th, .history-table td {
            padding: 10px 6px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .history-table th {
            background: rgba(255,255,255,0.1);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 9px;
        }

        .result-win {
            color: var(--casino-green);
            font-weight: 700;
        }

        .result-loss {
            color: var(--casino-red);
            font-weight: 700;
        }

        /* Achievements */
        .achievements-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            width: 100%;
        }

        .achievement-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: var(--radius);
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
        }

        .achievement-icon {
            width: 45px;
            height: 45px;
            min-width: 45px;
            background: linear-gradient(135deg, var(--casino-gold), #ffed4e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--dark);
        }

        .achievement-card.locked .achievement-icon {
            background: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.3);
        }

        .achievement-info {
            flex: 1;
            min-width: 0;
        }

        .achievement-info h4 {
            font-size: 14px;
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .achievement-info p {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 6px;
            line-height: 1.2;
        }

        .achievement-progress {
            background: rgba(255,255,255,0.1);
            height: 5px;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--casino-green), var(--casino-gold));
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Deposit Page */
        .deposit-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        .deposit-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            text-align: center;
            transition: var(--transition);
        }

        .deposit-input:focus {
            outline: none;
            border-color: var(--casino-gold);
            box-shadow: 0 0 0 2px rgba(255,215,0,0.2);
        }

        .deposit-packages {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            width: 100%;
            margin: 15px 0;
        }

        .deposit-package {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .deposit-package:hover {
            transform: translateY(-2px);
            border-color: var(--casino-gold);
        }

        .deposit-package.selected {
            background: linear-gradient(135deg, var(--casino-green), var(--primary));
            border-color: var(--casino-gold);
            box-shadow: 0 5px 15px rgba(25, 135, 84, 0.3);
        }

        .package-stars {
            font-size: 20px;
            font-weight: 700;
            color: var(--casino-gold);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .package-coins {
            font-size: 14px;
            font-weight: 600;
            color: white;
        }

        .package-bonus {
            font-size: 10px;
            color: var(--casino-green);
            margin-top: 3px;
        }

        .telegram-bot-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #0088cc;
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: 600;
            transition: var(--transition);
            margin: 10px 0;
            width: 100%;
            max-width: 300px;
        }

        .telegram-bot-link:hover {
            background: #0077b3;
            transform: translateY(-2px);
        }

        .deposit-instruction {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 12px;
            line-height: 1.4;
            width: 100%;
        }

        .deposit-instruction h3 {
            color: var(--casino-gold);
            margin-bottom: 10px;
            font-size: 14px;
        }

        .deposit-instruction ol {
            padding-left: 20px;
            margin-bottom: 10px;
        }

        .deposit-instruction li {
            margin-bottom: 8px;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 10px;
            right: 10px;
            left: 10px;
            background: linear-gradient(135deg, var(--casino-green), var(--primary));
            color: white;
            padding: 12px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            z-index: 1000;
            display: none;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease;
            max-width: calc(100vw - 20px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .notification.show {
            display: flex;
        }

        .notification i {
            font-size: 18px;
            min-width: 20px;
        }

        .notification-content h4 {
            font-size: 13px;
            margin-bottom: 2px;
        }

        .notification-content p {
            font-size: 11px;
            opacity: 0.9;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: var(--radius);
            padding: 20px;
            width: 100%;
            max-width: 350px;
            box-shadow: var(--shadow);
            border: 2px solid var(--casino-gold);
            text-align: center;
        }

        .modal h2 {
            font-size: 20px;
            margin-bottom: 12px;
            color: var(--casino-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .modal p {
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 15px;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 20px;
            font-size: 10px;
            opacity: 0.7;
            width: 100%;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--light);
            text-decoration: none;
            transition: var(--transition);
            font-size: 10px;
        }

        /* Responsive Breakpoints */
        @media (min-width: 375px) {
            .header {
                padding: 15px;
                gap: 15px;
            }
            
            .logo-icon {
                width: 50px;
                height: 50px;
                font-size: 22px;
            }
            
            .logo-text h1 {
                font-size: 20px;
            }
            
            .logo-text p {
                font-size: 10px;
            }
            
            .stat-box {
                min-width: 100px;
                padding: 12px 15px;
            }
            
            .stat-value {
                font-size: 20px;
            }
        }

        @media (min-width: 480px) {
            .games-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .menu {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .betting-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .blackjack-controls {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .deposit-packages {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .mobile-menu-toggle {
                display: none;
            }
            
            .header {
                flex-direction: row;
                padding: 20px 25px;
                margin-bottom: 20px;
            }
            
            .logo {
                width: auto;
                justify-content: flex-start;
            }
            
            .logo-text {
                text-align: left;
            }
            
            .logo-text h1 {
                font-size: 24px;
            }
            
            .logo-text p {
                font-size: 12px;
            }
            
            .stats {
                width: auto;
                justify-content: flex-end;
            }
            
            .sidebar {
                display: block;
                position: static;
                width: 250px;
                max-height: none;
                order: 1;
            }
            
            .main-content {
                flex-direction: row;
                gap: 20px;
            }
            
            .content-area {
                order: 2;
                flex: 1;
            }
            
            .menu {
                grid-template-columns: 1fr;
            }
            
            .menu-btn {
                flex-direction: row;
                justify-content: flex-start;
                padding: 12px 15px;
                font-size: 14px;
                min-height: auto;
                text-align: left;
                gap: 12px;
            }
            
            .menu-btn i {
                font-size: 18px;
                min-width: 20px;
            }
            
            .games-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .game-header {
                padding: 20px;
            }
            
            .game-icon {
                font-size: 40px;
            }
            
            .game-title {
                font-size: 20px;
            }
            
            .game-description {
                font-size: 13px;
            }
            
            .stat-val {
                font-size: 15px;
            }
            
            .slot-reel {
                width: 90px;
                height: 120px;
                font-size: 45px;
            }
            
            .roulette-wheel-container {
                width: 320px;
                height: 320px;
            }
            
            .roulette-number {
                font-size: 14px;
            }
            
            .betting-grid {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .bet-cell {
                font-size: 12px;
            }
            
            .card {
                width: 65px;
                height: 97px;
                font-size: 20px;
            }
            
            .achievements-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .deposit-packages {
                grid-template-columns: repeat(4, 1fr);
                max-width: 600px;
            }
            
            .notification {
                left: auto;
                right: 20px;
                max-width: 350px;
            }
        }

        @media (min-width: 1024px) {
            .games-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .slot-reel {
                width: 100px;
                height: 140px;
                font-size: 50px;
            }
            
            .roulette-wheel-container {
                width: 350px;
                height: 350px;
            }
            
            .achievements-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1200px) {
            .games-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 25px;
            }
            
            .slot-reel {
                width: 120px;
                height: 160px;
                font-size: 60px;
            }
            
            .roulette-wheel-container {
                width: 400px;
                height: 400px;
            }
            
            .betting-grid {
                grid-template-columns: repeat(12, 1fr);
            }
        }

        /* Touch improvements */
        button, .btn-control, .game-btn, .spin-btn, .bonus-btn, .bet-cell, .menu-btn {
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
            cursor: pointer;
            outline: none;
        }

        button:active, .btn-control:active, .game-btn:active, .spin-btn:active {
            transform: scale(0.95);
        }

        /* Hide scrollbar but allow scrolling */
        .game-content::-webkit-scrollbar {
            width: 5px;
        }

        .game-content::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        .game-content::-webkit-scrollbar-thumb {
            background: var(--casino-gold);
            border-radius: 10px;
        }

        /* Game rules styling */
        .game-rules {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 12px;
            margin-top: 15px;
            font-size: 11px;
            line-height: 1.4;
        }

        .game-rules h3 {
            color: var(--casino-gold);
            margin-bottom: 8px;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-coins"></i>
                </div>
                <div class="logo-text">
                    <h1>LUCKY PENGUIN CASINO</h1>
                    <p>ИГРАЙ С УМОМ • ВЫИГРЫВАЙ БОЛЬШОЕ</p>
                </div>
            </div>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-value" id="balance">10,000</div>
                    <div class="stat-label">Баланс</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="level">1</div>
                    <div class="stat-label">Уровень</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="wins">0</div>
                    <div class="stat-label">Побед</div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="user-profile">
                    <div class="avatar" id="userAvatar">П</div>
                    <div class="user-info">
                        <h3 id="userName">Игрок #001</h3>
                        <p id="userStatus">VIP Статус: Новичок</p>
                    </div>
                </div>
                
                <nav class="menu">
                    <button class="menu-btn active" onclick="showPage('dashboard')">
                        <i class="fas fa-home"></i>
                        <span>Главная</span>
                    </button>
                    <button class="menu-btn" onclick="showPage('slots')">
                        <i class="fas fa-slot-machine"></i>
                        <span>Слоты</span>
                    </button>
                    <button class="menu-btn" onclick="showPage('roulette')">
                        <i class="fas fa-dharmachakra"></i>
                        <span>Рулетка</span>
                    </button>
                    <button class="menu-btn" onclick="showPage('blackjack')">
                        <i class="fas fa-club"></i>
                        <span>Блекджек</span>
                    </button>
                    <button class="menu-btn" onclick="showPage('dice')">
                        <i class="fas fa-dice"></i>
                        <span>Кости</span>
                    </button>
                    <button class="menu-btn" onclick="showPage('deposit')">
                        <i class="fas fa-coins"></i>
                        <span>Пополнение</span>
                    </button>
                    <button class="menu-btn" onclick="showPage('history')">
                        <i class="fas fa-history"></i>
                        <span>История</span>
                    </button>
                    <button class="menu-btn" onclick="showPage('achievements')">
                        <i class="fas fa-trophy"></i>
                        <span>Достижения</span>
                    </button>
                </nav>
                
                <div class="bonus-box">
                    <h3>Ежедневный бонус</h3>
                    <button class="bonus-btn" id="dailyBonus" onclick="claimDailyBonus()">
                        <i class="fas fa-gift"></i> Забрать 500 ₿
                    </button>
                    <p id="bonusTimer" style="margin-top: 8px; font-size: 10px;"></p>
                </div>
            </aside>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Dashboard -->
                <div id="dashboard" class="game-page active">
                    <div class="game-header-page">
                        <h2><i class="fas fa-crown"></i> Добро пожаловать в Lucky Penguin Casino!</h2>
                        <p>Выберите игру и испытайте удачу. Играйте ответственно!</p>
                    </div>
                    
                    <div class="games-grid">
                        <div class="game-card" onclick="showPage('slots')">
                            <div class="game-header">
                                <div class="game-icon"><i class="fas fa-slot-machine"></i></div>
                                <h3 class="game-title">СЛОТЫ</h3>
                                <p class="game-description">Классические игровые автоматы с высокими коэффициентами выигрыша</p>
                            </div>
                            <div class="game-stats">
                                <div class="game-stat">
                                    <div class="stat-val">x1000</div>
                                    <div class="stat-label">Макс выигрыш</div>
                                </div>
                                <div class="game-stat">
                                    <div class="stat-val">96.5%</div>
                                    <div class="stat-label">RTP</div>
                                </div>
                            </div>
                        </div>

                        <div class="game-card" onclick="showPage('roulette')">
                            <div class="game-header">
                                <div class="game-icon"><i class="fas fa-dharmachakra"></i></div>
                                <h3 class="game-title">РУЛЕТКА</h3>
                                <p class="game-description">Европейская рулетка с 37 секторами и разнообразными ставками</p>
                            </div>
                            <div class="game-stats">
                                <div class="game-stat">
                                    <div class="stat-val">x35</div>
                                    <div class="stat-label">Макс выигрыш</div>
                                </div>
                                <div class="game-stat">
                                    <div class="stat-val">97.3%</div>
                                    <div class="stat-label">RTP</div>
                                </div>
                            </div>
                        </div>

                        <div class="game-card" onclick="showPage('blackjack')">
                            <div class="game-header">
                                <div class="game-icon"><i class="fas fa-club"></i></div>
                                <h3 class="game-title">БЛЕКДЖЕК</h3>
                                <p class="game-description">Классическая карточная игра против дилера, дойдите до 21!</p>
                            </div>
                            <div class="game-stats">
                                <div class="game-stat">
                                    <div class="stat-val">x1.5</div>
                                    <div class="stat-label">Выигрыш</div>
                                </div>
                                <div class="game-stat">
                                    <div class="stat-val">99.5%</div>
                                    <div class="stat-label">RTP</div>
                                </div>
                            </div>
                        </div>

                        <div class="game-card" onclick="showPage('dice')">
                            <div class="game-header">
                                <div class="game-icon"><i class="fas fa-dice"></i></div>
                                <h3 class="game-title">КОСТИ</h3>
                                <p class="game-description">Бросьте кости и угадайте результат. Просто и увлекательно!</p>
                            </div>
                            <div class="game-stats">
                                <div class="game-stat">
                                    <div class="stat-val">x30</div>
                                    <div class="stat-label">Макс выигрыш</div>
                                </div>
                                <div class="game-stat">
                                    <div class="stat-val">95.0%</div>
                                    <div class="stat-label">RTP</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Слоты -->
                <div id="slots" class="game-page">
                    <div class="game-header-page">
                        <h2><i class="fas fa-slot-machine"></i> ИГРОВЫЕ АВТОМАТЫ</h2>
                        <p>Крутите барабаны и выигрывайте большие призы!</p>
                    </div>
                    
                    <div class="game-content">
                        <div class="slots-container">
                            <div class="slots-machine">
                                <div class="slot-reel" id="reel1">7</div>
                                <div class="slot-reel" id="reel2">7</div>
                                <div class="slot-reel" id="reel3">7</div>
                            </div>
                            
                            <div class="bet-controls">
                                <button class="btn-control" onclick="changeBet(-100)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <div>
                                    <div style="font-size: 11px; opacity: 0.7; margin-bottom: 2px;">СТАВКА</div>
                                    <div class="bet-amount" id="slotBet">100</div>
                                </div>
                                <button class="btn-control" onclick="changeBet(100)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            
                            <button class="spin-btn" id="spinBtn" onclick="spinSlots()">
                                <i class="fas fa-play"></i> КРУТИТЬ
                            </button>
                            
                            <div class="game-rules">
                                <h3>Правила игры:</h3>
                                <p>• 3 одинаковых символа = выигрыш ×10 ставки<br>
                                • 2 одинаковых символа = выигрыш ×2 ставки<br>
                                • Три семёрки = ДЖЕКПОТ ×100 ставки!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Рулетка -->
                <div id="roulette" class="game-page">
                    <div class="game-header-page">
                        <h2><i class="fas fa-dharmachakra"></i> ЕВРОПЕЙСКАЯ РУЛЕТКА</h2>
                        <p>Ставьте на числа, цвета или сектора и вращайте колесо удачи!</p>
                    </div>
                    
                    <div class="game-content">
                        <div class="roulette-container">
                            <div class="roulette-wheel-container">
                                <div class="roulette-wheel" id="rouletteWheel">
                                    <div class="roulette-wheel-inner">CASINO</div>
                                </div>
                                <div class="roulette-pointer"></div>
                            </div>
                            
                            <div class="betting-controls">
                                <button class="btn-control" onclick="changeRouletteBet(-50)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <div style="text-align: center;">
                                    <div style="font-size: 11px; opacity: 0.7;">СТАВКА</div>
                                    <div class="bet-amount" id="rouletteBet">100</div>
                                </div>
                                <button class="btn-control" onclick="changeRouletteBet(50)">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="game-btn primary" id="rouletteSpinBtn" onclick="spinRoulette()">
                                    <i class="fas fa-play"></i> ВРАЩАТЬ
                                </button>
                            </div>
                            
                            <div style="text-align: center; width: 100%;">
                                <h3 style="font-size: 15px; margin-bottom: 10px;">Выберите ставку:</h3>
                                <div class="betting-grid" id="bettingGrid">
                                    <!-- Ставки будут сгенерированы через JS -->
                                </div>
                                <div style="margin-top: 12px; color: var(--casino-gold); font-size: 13px;">
                                    <div style="margin-bottom: 5px;">Выбранная ставка: <span id="selectedBet" style="font-weight: 700;">Не выбрана</span></div>
                                    <div>Коэффициент: <span id="betMultiplier" style="font-weight: 700;">0</span>x</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Блекджек -->
                <div id="blackjack" class="game-page">
                    <div class="game-header-page">
                        <h2><i class="fas fa-club"></i> БЛЕКДЖЕК</h2>
                        <p>Наберите 21 очко или близко к нему, но не переборщите!</p>
                    </div>
                    
                    <div class="game-content">
                        <div class="blackjack-container">
                            <div class="cards-area">
                                <div class="dealer-area">
                                    <h3 style="font-size: 15px;">Дилер</h3>
                                    <div class="card-hand" id="dealerHand"></div>
                                    <div style="font-size: 13px;">Счет: <span id="dealerScore">?</span></div>
                                </div>
                                
                                <div class="player-area">
                                    <h3 style="font-size: 15px;">Игрок</h3>
                                    <div class="card-hand" id="playerHand"></div>
                                    <div style="font-size: 13px;">Счет: <span id="playerScore">?</span></div>
                                </div>
                            </div>
                            
                            <div class="betting-controls">
                                <button class="btn-control" onclick="changeBlackjackBet(-50)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <div>
                                    <div style="font-size: 11px; opacity: 0.7;">СТАВКА</div>
                                    <div class="bet-amount" id="blackjackBet">100</div>
                                </div>
                                <button class="btn-control" onclick="changeBlackjackBet(50)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            
                            <div class="blackjack-controls">
                                <button class="game-btn primary" id="dealBtn" onclick="dealBlackjack()">
                                    <i class="fas fa-play"></i> НАЧАТЬ ИГРУ
                                </button>
                                <button class="game-btn success" id="hitBtn" onclick="hitCard()" disabled>
                                    <i class="fas fa-plus"></i> ЕЩЕ КАРТУ
                                </button>
                                <button class="game-btn danger" id="standBtn" onclick="stand()" disabled>
                                    <i class="fas fa-hand"></i> ХВАТИТ
                                </button>
                                <button class="game-btn" id="doubleBtn" onclick="doubleDown()" disabled>
                                    <i class="fas fa-times-two"></i> УДВОИТЬ
                                </button>
                            </div>
                            
                            <div class="game-rules">
                                <h3>Правила игры:</h3>
                                <p>• Цель - набрать ближе к 21 чем дилер<br>
                                • Туз = 1 или 11, картинки = 10<br>
                                • Блекджек (туз + 10) = выигрыш ×1.5<br>
                                • Удвоение доступно на первых двух картах</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Кости -->
                <div id="dice" class="game-page">
                    <div class="game-header-page">
                        <h2><i class="fas fa-dice"></i> ИГРА В КОСТИ</h2>
                        <p>Бросьте кости и угадайте результат!</p>
                    </div>
                    
                    <div class="game-content">
                        <div class="dice-container">
                            <div class="dice-area">
                                <div class="dice" id="dice1"></div>
                                <div class="dice" id="dice2"></div>
                            </div>
                            
                            <div class="dice-result" id="diceResult">?</div>
                            
                            <div class="betting-controls">
                                <button class="btn-control" onclick="changeDiceBet(-50)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <div>
                                    <div style="font-size: 11px; opacity: 0.7;">СТАВКА</div>
                                    <div class="bet-amount" id="diceBet">100</div>
                                </div>
                                <button class="btn-control" onclick="changeDiceBet(50)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            
                            <div style="text-align: center; width: 100%;">
                                <h3 style="font-size: 15px; margin-bottom: 10px;">Выберите ставку:</h3>
                                <div style="display: flex; flex-direction: column; gap: 8px; margin: 12px 0;">
                                    <button class="game-btn" onclick="setDiceBetType('low')" style="width: 100%;">
                                        Меньше 7 (×2)
                                    </button>
                                    <button class="game-btn primary" onclick="setDiceBetType('7')" style="width: 100%;">
                                        Ровно 7 (×5)
                                    </button>
                                    <button class="game-btn" onclick="setDiceBetType('high')" style="width: 100%;">
                                        Больше 7 (×2)
                                    </button>
                                </div>
                                
                                <button class="spin-btn" onclick="rollDice()" style="margin-top: 10px;">
                                    <i class="fas fa-dice"></i> БРОСИТЬ КОСТИ
                                </button>
                                
                                <div style="margin-top: 15px; font-size: 13px;">
                                    <div style="margin-bottom: 5px;">Текущая ставка: <span id="diceBetType" style="font-weight: 700;">Не выбрана</span></div>
                                    <div>Коэффициент: <span id="diceMultiplier" style="font-weight: 700;">0</span>x</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Пополнение -->
                <div id="deposit" class="game-page">
                    <div class="game-header-page">
                        <h2><i class="fas fa-coins"></i> ПОПОЛНЕНИЕ БАЛАНСА</h2>
                        <p>Покупайте монеты за звёзды Telegram и получайте бонусы!</p>
                    </div>
                    
                    <div class="game-content">
                        <div class="deposit-container">
                            <div style="text-align: center; width: 100%;">
                                <h3 style="font-size: 15px; margin-bottom: 10px; color: var(--casino-gold);">Текущий баланс: <span id="currentBalance">10,000</span> ₿</h3>
                                
                                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                                    <h4 style="margin-bottom: 10px;">🎯 Выберите пакет:</h4>
                                    <div class="deposit-packages" id="depositPackages">
                                        <!-- Пакеты будут сгенерированы через JS -->
                                    </div>
                                </div>
                                
                                <div style="background: linear-gradient(135deg, var(--casino-purple), var(--primary)); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                    <h4 style="margin-bottom: 5px;">📦 Выбранный пакет:</h4>
                                    <div id="selectedPackageInfo" style="font-size: 14px;">Не выбран</div>
                                    <div id="selectedPackagePrice" style="font-size: 12px; opacity: 0.8;"></div>
                                </div>
                                
                                <a href="https://t.me/YOUR_BOT_USERNAME?start=deposit" class="telegram-bot-link" target="_blank" id="telegramBotLink">
                                    <i class="fab fa-telegram"></i> КУПИТЬ В ТЕЛЕГРАМ БОТЕ
                                </a>
                                
                                <div style="margin-top: 20px;">
                                    <h4 style="margin-bottom: 10px;">🔑 ИЛИ введите код пополнения:</h4>
                                    <input type="text" class="deposit-input" id="depositCode" placeholder="Введите код из бота" maxlength="32">
                                    <button class="spin-btn" onclick="activateDepositCode()" style="margin-top: 10px; width: 100%; max-width: 300px;">
                                        <i class="fas fa-check-circle"></i> АКТИВИРОВАТЬ КОД
                                    </button>
                                </div>
                                
                                <div class="deposit-instruction">
                                    <h3>📖 Как пополнить баланс:</h3>
                                    <ol>
                                        <li>Нажмите кнопку "КУПИТЬ В ТЕЛЕГРАМ БОТЕ"</li>
                                        <li>Выберите пакет в боте и оплатите звёздами</li>
                                        <li>Получите уникальный код в боте</li>
                                        <li>Вернитесь в игру и введите код в поле выше</li>
                                        <li>Нажмите "Активировать код"</li>
                                    </ol>
                                    <p style="color: var(--casino-green); font-size: 11px;">
                                        <i class="fas fa-shield-alt"></i> Все платежи защищены Telegram
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- История -->
                <div id="history" class="game-page">
                    <div class="game-header-page">
                        <h2><i class="fas fa-history"></i> ИСТОРИЯ ИГР</h2>
                        <p>Ваша статистика и последние игры</p>
                    </div>
                    
                    <div class="game-content">
                        <div class="history-table-container">
                            <table class="history-table">
                                <thead>
                                    <tr>
                                        <th>Дата</th>
                                        <th>Игра</th>
                                        <th>Ставка</th>
                                        <th>Результат</th>
                                        <th>Выигрыш</th>
                                    </tr>
                                </thead>
                                <tbody id="historyTable">
                                    <!-- История будет загружена через JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Достижения -->
                <div id="achievements" class="game-page">
                    <div class="game-header-page">
                        <h2><i class="fas fa-trophy"></i> ДОСТИЖЕНИЯ</h2>
                        <p>Зарабатывайте достижения и получайте бонусы!</p>
                    </div>
                    
                    <div class="game-content">
                        <div class="achievements-grid" id="achievementsGrid">
                            <!-- Достижения будут загружены через JS -->
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-links">
                <a href="#">Правила</a>
                <a href="#">Поддержка</a>
                <a href="#">Ответственная игра</a>
                <a href="#">О нас</a>
            </div>
            <p>© 2023 Lucky Penguin Casino. Все права защищены. | Играйте ответственно. 18+</p>
            <p>Это демонстрационная игра. Настоящие деньги не используются.</p>
        </footer>
    </div>

    <!-- Уведомление -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <div class="notification-content">
            <h4 id="notificationTitle">Успех!</h4>
            <p id="notificationMessage">Операция выполнена успешно</p>
        </div>
    </div>

    <!-- Модальное окно выигрыша -->
    <div class="modal" id="winModal">
        <div class="modal-content">
            <h2><i class="fas fa-trophy"></i> ПОБЕДА!</h2>
            <p id="winMessage">Вы выиграли 1000 ₿!</p>
            <button class="bonus-btn" onclick="closeModal()" style="margin-top: 12px;">
                <i class="fas fa-check"></i> ПРОДОЛЖИТЬ
            </button>
        </div>
    </div>

    <!-- Модальное окно пополнения -->
    <div class="modal" id="depositModal">
        <div class="modal-content">
            <h2><i class="fas fa-gift"></i> БАЛАНС ПОПОЛНЕН!</h2>
            <p id="depositMessage">+1000 ₿ зачислено на баланс!</p>
            <button class="bonus-btn" onclick="closeDepositModal()" style="margin-top: 12px;">
                <i class="fas fa-check"></i> ПРОДОЛЖИТЬ ИГРУ
            </button>
        </div>
    </div>

    <script>
        // Telegram Web App Integration
        let tg = null;
        let webAppUser = null;
        let webAppData = null;

        // Инициализация Telegram Web App
        function initTelegramWebApp() {
            if (window.Telegram && Telegram.WebApp) {
                tg = Telegram.WebApp;
                tg.expand();
                tg.ready();
                
                // Получаем данные пользователя
                webAppUser = tg.initDataUnsafe?.user;
                webAppData = tg.initDataUnsafe;
                
                if (webAppUser) {
                    // Обновляем информацию в профиле
                    updateUserProfile(webAppUser);
                    
                    // Проверяем наличие кода пополнения в параметрах запуска
                    checkStartParamForDeposit();
                }
                
                // Настройка кнопки внизу экрана (если нужно)
                setupMainButton();
                
                console.log('Telegram Web App инициализирован:', webAppUser);
            } else {
                console.log('Игра запущена вне Telegram');
            }
        }

        // Обновление профиля пользователя
        function updateUserProfile(user) {
            const avatar = document.getElementById('userAvatar');
            const name = document.getElementById('userName');
            
            if (user.first_name) {
                name.textContent = user.first_name + (user.last_name ? ' ' + user.last_name : '');
            }
            
            if (user.username) {
                document.getElementById('userStatus').textContent = `@${user.username}`;
            }
            
            // Устанавливаем первую букву имени в аватар
            if (user.first_name) {
                avatar.textContent = user.first_name.charAt(0).toUpperCase();
            }
            
            // Сохраняем ID пользователя
            state.telegramUserId = user.id;
        }

        // Проверка параметров запуска на наличие кода пополнения
        function checkStartParamForDeposit() {
            if (tg && tg.initData) {
                const startParam = tg.initDataUnsafe?.start_param;
                if (startParam && startParam.startsWith('deposit_')) {
                    const code = startParam.replace('deposit_', '');
                    document.getElementById('depositCode').value = code;
                    showPage('deposit');
                    showNotification('Код обнаружен', 'Код пополнения автоматически подставлен', 'info');
                }
            }
        }

        // Настройка основной кнопки Telegram
        function setupMainButton() {
            if (!tg) return;
            
            tg.MainButton.setText('КУПИТЬ МОНЕТЫ');
            tg.MainButton.onClick(function() {
                openTelegramBot();
            });
            tg.MainButton.show();
        }

        // Открытие Telegram бота для покупки
        function openTelegramBot() {
            const selectedPackage = state.selectedDepositPackage;
            if (!selectedPackage) {
                showNotification('Выберите пакет', 'Сначала выберите пакет монет', 'error');
                return;
            }
            
            const botUsername = 'YOUR_BOT_USERNAME'; // Замените на username вашего бота
            const packageId = selectedPackage.id;
            const userId = state.telegramUserId || 'unknown';
            
            // Формируем ссылку с параметрами
            const url = `https://t.me/${botUsername}?start=deposit_${packageId}_${userId}`;
            
            if (tg) {
                tg.openTelegramLink(url);
            } else {
                window.open(url, '_blank');
            }
        }

        // Состояние игры
        const state = {
            balance: 10000,
            level: 1,
            wins: 0,
            dailyBonusAvailable: true,
            lastBonusDate: null,
            telegramUserId: null,
            selectedDepositPackage: null,
            achievements: {
                firstWin: { unlocked: false, progress: 0, target: 1 },
                bigWinner: { unlocked: false, progress: 0, target: 10000 },
                slotsMaster: { unlocked: false, progress: 0, target: 100 },
                rouletteKing: { unlocked: false, progress: 0, target: 50 },
                blackjackPro: { unlocked: false, progress: 0, target: 25 },
                diceExpert: { unlocked: false, progress: 0, target: 50 },
                depositMade: { unlocked: false, progress: 0, target: 1 }
            },
            gameHistory: [],
            depositHistory: []
        };

        // Пакеты для пополнения
        const depositPackages = [
            { id: 'small', stars: 5, coins: 50, bonus: 5, label: '🟡 Начальный' },
            { id: 'medium', stars: 10, coins: 100, bonus: 15, label: '🟡🟡 Стандарт' },
            { id: 'large', stars: 25, coins: 250, bonus: 50, label: '🟡🟡🟡 Премиум' },
            { id: 'premium', stars: 50, coins: 500, bonus: 150, label: '💎 VIP' },
            { id: 'mega', stars: 100, coins: 1200, bonus: 300, label: '👑 МЕГА' },
            { id: 'ultimate', stars: 250, coins: 3000, bonus: 1000, label: '⚡ УЛЬТИМАТ' }
        ];

        // Мобильное меню
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const sidebar = document.getElementById('sidebar');

        mobileMenuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
            mobileMenuToggle.innerHTML = sidebar.classList.contains('active') ? 
                '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });

        // Закрытие меню при клике снаружи
        document.addEventListener('click', (event) => {
            if (window.innerWidth <= 767) {
                if (!sidebar.contains(event.target) && !mobileMenuToggle.contains(event.target)) {
                    sidebar.classList.remove('active');
                    mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
                }
            }
        });

        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            initTelegramWebApp();
            loadGameState();
            updateUI();
            initRoulette();
            initDepositPackages();
            updateBonusTimer();
            loadHistory();
            loadAchievements();
            setupDiceFaces();
            
            // Автосохранение
            setInterval(saveGameState, 30000);
            
            // Проверяем наличие кода в URL (для веб-версии)
            checkURLForDepositCode();
        });

        // Проверка URL на наличие кода пополнения
        function checkURLForDepositCode() {
            const urlParams = new URLSearchParams(window.location.search);
            const depositCode = urlParams.get('deposit_code');
            if (depositCode) {
                document.getElementById('depositCode').value = depositCode;
                showPage('deposit');
                showNotification('Код обнаружен', 'Код пополнения автоматически подставлен', 'info');
            }
        }

        // Инициализация пакетов пополнения
        function initDepositPackages() {
            const container = document.getElementById('depositPackages');
            container.innerHTML = '';
            
            depositPackages.forEach(pkg => {
                const packageDiv = document.createElement('div');
                packageDiv.className = 'deposit-package';
                packageDiv.innerHTML = `
                    <div class="package-stars">
                        <i class="fas fa-star"></i>${pkg.stars}
                    </div>
                    <div class="package-coins">${pkg.coins + pkg.bonus} ₿</div>
                    <div class="package-bonus">+${pkg.bonus} бонус</div>
                `;
                
                packageDiv.onclick = () => selectDepositPackage(pkg);
                
                container.appendChild(packageDiv);
            });
            
            // Обновляем ссылку на бота
            updateTelegramBotLink();
        }

        // Выбор пакета пополнения
        function selectDepositPackage(pkg) {
            state.selectedDepositPackage = pkg;
            
            // Обновляем UI выбранного пакета
            document.querySelectorAll('.deposit-package').forEach(el => {
                el.classList.remove('selected');
            });
            
            event.target.closest('.deposit-package').classList.add('selected');
            
            // Обновляем информацию о выбранном пакете
            document.getElementById('selectedPackageInfo').innerHTML = `
                <strong>${pkg.label}</strong> - ${pkg.coins + pkg.bonus} монет
            `;
            document.getElementById('selectedPackagePrice').innerHTML = `
                <i class="fas fa-star"></i> ${pkg.stars} звёзд (${pkg.coins} + ${pkg.bonus} бонус)
            `;
            
            // Обновляем ссылку на бота
            updateTelegramBotLink();
            
            showNotification('Пакет выбран', `Выбран пакет ${pkg.label}`, 'info');
        }

        // Обновление ссылки на Telegram бота
        function updateTelegramBotLink() {
            const botLink = document.getElementById('telegramBotLink');
            if (!botLink) return;
            
            if (state.selectedDepositPackage) {
                const packageId = state.selectedDepositPackage.id;
                const userId = state.telegramUserId || 'web';
                botLink.href = `https://t.me/YOUR_BOT_USERNAME?start=deposit_${packageId}_${userId}`;
            } else {
                botLink.href = 'https://t.me/YOUR_BOT_USERNAME?start=deposit';
            }
        }

        // Активация кода пополнения
        async function activateDepositCode() {
            const code = document.getElementById('depositCode').value.trim();
            
            if (!code) {
                showNotification('Ошибка', 'Введите код пополнения', 'error');
                return;
            }
            
            if (code.length < 8 || code.length > 32) {
                showNotification('Ошибка', 'Некорректный формат кода', 'error');
                return;
            }
            
            try {
                // Показываем индикатор загрузки
                showNotification('Проверка кода...', 'Пожалуйста, подождите', 'info');
                
                // В реальном приложении здесь будет запрос к вашему серверу
                // Для демо-версии эмулируем ответ сервера
                
                // Имитация задержки сети
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Демо-ответ сервера
                const demoResponse = {
                    success: true,
                    package: state.selectedDepositPackage || depositPackages[0],
                    coins: state.selectedDepositPackage ? 
                           state.selectedDepositPackage.coins + state.selectedDepositPackage.bonus : 
                           100,
                    transactionId: 'DEMO_' + Date.now()
                };
                
                // Для тестирования: если код содержит "TEST", всегда успех
                if (code.includes('TEST') || Math.random() > 0.3) {
                    // Успешная активация
                    processDepositSuccess(demoResponse);
                } else {
                    // Ошибка активации
                    throw new Error('Неверный или уже использованный код');
                }
                
            } catch (error) {
                console.error('Ошибка активации кода:', error);
                showNotification('Ошибка', error.message || 'Неверный код пополнения', 'error');
            }
        }

        // Обработка успешного пополнения
        function processDepositSuccess(response) {
            const coins = response.coins;
            const packageInfo = response.package;
            
            // Пополняем баланс
            state.balance += coins;
            
            // Добавляем в историю пополнений
            state.depositHistory.unshift({
                date: new Date().toLocaleString('ru-RU'),
                package: packageInfo.label,
                coins: coins,
                transactionId: response.transactionId
            });
            
            // Обновляем достижения
            updateAchievementProgress('depositMade', 1);
            updateAchievementProgress('bigWinner', coins);
            
            // Обновляем UI
            updateUI();
            saveGameState();
            
            // Очищаем поле ввода
            document.getElementById('depositCode').value = '';
            
            // Показываем уведомление
            showNotification('Успех!', `Баланс пополнен на ${formatNumber(coins)} ₿`, 'success');
            
            // Показываем модальное окно
            showDepositSuccessModal(coins, packageInfo);
            
            // Если в Telegram, отправляем данные обратно
            if (tg && tg.sendData) {
                const data = {
                    action: 'deposit_success',
                    coins: coins,
                    balance: state.balance,
                    transactionId: response.transactionId
                };
                tg.sendData(JSON.stringify(data));
            }
        }

        // Показ модального окна успешного пополнения
        function showDepositSuccessModal(coins, packageInfo) {
            document.getElementById('depositMessage').textContent = 
                `+${formatNumber(coins)} ₿ зачислено на баланс!`;
            document.getElementById('depositModal').classList.add('show');
        }

        function closeDepositModal() {
            document.getElementById('depositModal').classList.remove('show');
        }

        // Сохранение и загрузка
        function loadGameState() {
            const saved = localStorage.getItem('casinoState');
            if (saved) {
                const parsed = JSON.parse(saved);
                Object.assign(state, parsed);
            }
        }

        function saveGameState() {
            localStorage.setItem('casinoState', JSON.stringify(state));
        }

        function updateUI() {
            document.getElementById('balance').textContent = formatNumber(state.balance);
            document.getElementById('level').textContent = state.level;
            document.getElementById('wins').textContent = state.wins;
            document.getElementById('currentBalance').textContent = formatNumber(state.balance);
            
            const bonusBtn = document.getElementById('dailyBonus');
            if (!state.dailyBonusAvailable) {
                bonusBtn.disabled = true;
                bonusBtn.innerHTML = '<i class="fas fa-clock"></i> Уже получен';
            }
        }

        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Навигация
        function showPage(pageId) {
            if (window.innerWidth <= 767) {
                sidebar.classList.remove('active');
                mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            }
            
            document.querySelectorAll('.game-page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            document.querySelectorAll('.menu-btn').forEach(btn => btn.classList.remove('active'));
            const targetBtn = document.querySelector(`.menu-btn[onclick*="${pageId}"]`);
            if (targetBtn) targetBtn.classList.add('active');
            
            // Показываем/скрываем кнопку Telegram в зависимости от страницы
            if (tg && tg.MainButton) {
                if (pageId === 'deposit') {
                    tg.MainButton.setText('КУПИТЬ МОНЕТЫ');
                    tg.MainButton.show();
                } else {
                    tg.MainButton.hide();
                }
            }
        }

        // Уведомления
        function showNotification(title, message, type = 'success') {
            const notification = document.getElementById('notification');
            const icon = notification.querySelector('i');
            
            if (type === 'success') {
                icon.className = 'fas fa-check-circle';
                notification.style.background = 'linear-gradient(135deg, var(--casino-green), var(--primary))';
            } else if (type === 'error') {
                icon.className = 'fas fa-exclamation-circle';
                notification.style.background = 'linear-gradient(135deg, var(--casino-red), #fd7e14)';
            } else if (type === 'info') {
                icon.className = 'fas fa-info-circle';
                notification.style.background = 'linear-gradient(135deg, var(--primary), var(--casino-purple))';
            }
            
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 5000);
        }

        function showWinModal(amount, message) {
            document.getElementById('winMessage').textContent = message || `Вы выиграли ${formatNumber(amount)} ₿!`;
            document.getElementById('winModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('winModal').classList.remove('show');
        }

        // Бонусы
        function claimDailyBonus() {
            if (!state.dailyBonusAvailable) {
                showNotification('Бонус уже получен', 'Возвращайтесь завтра!', 'info');
                return;
            }
            
            const bonusAmount = 500;
            state.balance += bonusAmount;
            state.dailyBonusAvailable = false;
            state.lastBonusDate = new Date().toISOString();
            
            updateUI();
            saveGameState();
            showNotification('Бонус получен!', `+${bonusAmount} ₿ добавлено на баланс`);
            updateAchievementProgress('bigWinner', bonusAmount);
        }

        function updateBonusTimer() {
            const timerElement = document.getElementById('bonusTimer');
            
            if (state.dailyBonusAvailable) {
                timerElement.textContent = 'Доступно сейчас!';
                return;
            }
            
            if (!state.lastBonusDate) {
                timerElement.textContent = 'Доступно сейчас!';
                state.dailyBonusAvailable = true;
                return;
            }
            
            const lastBonus = new Date(state.lastBonusDate);
            const now = new Date();
            const nextBonus = new Date(lastBonus);
            nextBonus.setDate(nextBonus.getDate() + 1);
            
            if (now >= nextBonus) {
                timerElement.textContent = 'Доступно сейчас!';
                state.dailyBonusAvailable = true;
                return;
            }
            
            const diff = nextBonus - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            timerElement.textContent = `Следующий бонус через: ${hours}ч ${minutes}м`;
        }

        setInterval(updateBonusTimer, 60000);

        // ============ СЛОТЫ ============
        let slotBet = 100;
        const slotSymbols = ['7', '🍒', '⭐', '🔔', '🍋', '💎'];
        let isSpinning = false;

        function changeBet(amount) {
            slotBet = Math.max(10, Math.min(10000, slotBet + amount));
            document.getElementById('slotBet').textContent = slotBet;
        }

        function spinSlots() {
            if (isSpinning) return;
            if (state.balance < slotBet) {
                showNotification('Недостаточно средств', 'Пополните баланс', 'error');
                return;
            }

            isSpinning = true;
            const spinBtn = document.getElementById('spinBtn');
            spinBtn.disabled = true;
            state.balance -= slotBet;
            updateUI();

            // Генерируем результаты
            const results = [
                Math.floor(Math.random() * slotSymbols.length),
                Math.floor(Math.random() * slotSymbols.length),
                Math.floor(Math.random() * slotSymbols.length)
            ];

            const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];
            let completedReels = 0;

            reels.forEach((reel, index) => {
                let spins = 0;
                const totalSpins = 10 + index * 2;
                const spinInterval = setInterval(() => {
                    reel.textContent = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                    spins++;
                    
                    if (spins >= totalSpins) {
                        clearInterval(spinInterval);
                        setTimeout(() => {
                            reel.textContent = slotSymbols[results[index]];
                            completedReels++;
                            
                            if (completedReels === 3) {
                                setTimeout(() => {
                                    calculateSlotWin(results);
                                    spinBtn.disabled = false;
                                    isSpinning = false;
                                }, 300);
                            }
                        }, 100);
                    }
                }, 80);
            });
        }

        function calculateSlotWin(results) {
            let winMultiplier = 0;
            let winMessage = '';
            
            // Проверка комбинаций
            if (results[0] === results[1] && results[1] === results[2]) {
                if (results[0] === 0) { // Три семёрки
                    winMultiplier = 100;
                    winMessage = 'ДЖЕКПОТ! ТРИ СЕМЁРКИ!';
                } else {
                    winMultiplier = 10;
                    winMessage = 'ТРИ ОДИНАКОВЫХ СИМВОЛА!';
                }
            } else if (results[0] === results[1] || results[1] === results[2] || results[0] === results[2]) {
                winMultiplier = 2;
                winMessage = 'ДВА ОДИНАКОВЫХ СИМВОЛА!';
            }

            if (winMultiplier > 0) {
                const winAmount = slotBet * winMultiplier;
                state.balance += winAmount;
                state.wins++;
                
                addToHistory('Слоты', slotBet, winAmount, true);
                updateAchievementProgress('firstWin', 1);
                updateAchievementProgress('slotsMaster', 1);
                updateAchievementProgress('bigWinner', winAmount);
                
                updateUI();
                saveGameState();
                
                if (winMultiplier >= 10) {
                    showWinModal(winAmount, winMessage);
                } else {
                    showNotification('Победа!', `Вы выиграли ${formatNumber(winAmount)} ₿`);
                }
            } else {
                addToHistory('Слоты', slotBet, 0, false);
                showNotification('Повезёт в следующий раз!', 'Попробуйте ещё раз', 'info');
            }
        }

        // ============ РУЛЕТКА ============
        let rouletteBet = 100;
        let selectedBet = null;
        let betMultiplier = 0;
        let isRouletteSpinning = false;

        function initRoulette() {
            const wheel = document.getElementById('rouletteWheel');
            const numbers = [
                '0', '32', '15', '19', '4', '21', '2', '25', '17', '34', '6',
                '27', '13', '36', '11', '30', '8', '23', '10', '5', '24', '16',
                '33', '1', '20', '14', '31', '9', '22', '18', '29', '7', '28',
                '12', '35', '3', '26'
            ];
            
            // Создаем числа на колесе
            numbers.forEach((num, index) => {
                const angle = (index / numbers.length) * 360;
                const numberDiv = document.createElement('div');
                numberDiv.className = 'roulette-number';
                numberDiv.innerHTML = `<span>${num}</span>`;
                numberDiv.style.transform = `rotate(${angle}deg)`;
                
                // Определяем цвет числа
                if (num === '0') {
                    numberDiv.style.color = 'white';
                    numberDiv.style.backgroundColor = 'green';
                } else {
                    const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(parseInt(num));
                    numberDiv.style.color = 'white';
                    numberDiv.style.backgroundColor = isRed ? 'var(--casino-red)' : 'black';
                }
                
                numberDiv.dataset.number = num;
                numberDiv.dataset.index = index;
                wheel.appendChild(numberDiv);
            });
            
            // Создаем сетку ставок
            const bettingGrid = document.getElementById('bettingGrid');
            const betTypes = [
                { type: 'number', value: '0', label: '0', multiplier: 35, color: 'green' },
                { type: 'color', value: 'red', label: 'Красное', multiplier: 2, color: 'var(--casino-red)' },
                { type: 'color', value: 'black', label: 'Черное', multiplier: 2, color: 'black' },
                { type: 'dozen', value: '1-12', label: '1-12', multiplier: 3, color: 'var(--primary)' },
                { type: 'dozen', value: '13-24', label: '13-24', multiplier: 3, color: 'var(--primary)' },
                { type: 'dozen', value: '25-36', label: '25-36', multiplier: 3, color: 'var(--primary)' },
                { type: 'half', value: '1-18', label: '1-18', multiplier: 2, color: 'var(--warning)' },
                { type: 'half', value: '19-36', label: '19-36', multiplier: 2, color: 'var(--warning)' },
                { type: 'even', value: 'even', label: 'Четное', multiplier: 2, color: 'var(--casino-purple)' },
                { type: 'odd', value: 'odd', label: 'Нечетное', multiplier: 2, color: 'var(--casino-purple)' },
                { type: 'column', value: 'col1', label: '1 столбец', multiplier: 3, color: 'var(--success)' },
                { type: 'column', value: 'col2', label: '2 столбец', multiplier: 3, color: 'var(--success)' }
            ];
            
            betTypes.forEach(bet => {
                const cell = document.createElement('div');
                cell.className = 'bet-cell';
                cell.textContent = bet.label;
                cell.style.backgroundColor = bet.color;
                cell.dataset.type = bet.type;
                cell.dataset.value = bet.value;
                cell.dataset.multiplier = bet.multiplier;
                cell.onclick = () => selectRouletteBet(bet.type, bet.value, bet.multiplier, cell);
                bettingGrid.appendChild(cell);
            });
        }

        function changeRouletteBet(amount) {
            rouletteBet = Math.max(10, Math.min(10000, rouletteBet + amount));
            document.getElementById('rouletteBet').textContent = rouletteBet;
        }

        function selectRouletteBet(type, value, multiplier, element) {
            document.querySelectorAll('.bet-cell').forEach(cell => cell.classList.remove('selected'));
            element.classList.add('selected');
            selectedBet = { type, value, multiplier };
            betMultiplier = multiplier;
            
            document.getElementById('selectedBet').textContent = element.textContent;
            document.getElementById('betMultiplier').textContent = multiplier;
        }

        function spinRoulette() {
            if (isRouletteSpinning) return;
            if (!selectedBet) {
                showNotification('Выберите ставку', 'Выберите тип ставки на сетке', 'error');
                return;
            }

            if (state.balance < rouletteBet) {
                showNotification('Недостаточно средств', 'Пополните баланс', 'error');
                return;
            }

            isRouletteSpinning = true;
            const spinBtn = document.getElementById('rouletteSpinBtn');
            spinBtn.disabled = true;
            state.balance -= rouletteBet;
            updateUI();

            // Случайное число от 0 до 36
            const winningNumber = Math.floor(Math.random() * 37);
            
            // Определяем характеристики выпавшего числа
            const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(winningNumber);
            const isBlack = [2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35].includes(winningNumber);
            const isEven = winningNumber % 2 === 0 && winningNumber !== 0;
            const isOdd = winningNumber % 2 === 1;

            // Определяем выигрыш
            let isWin = false;
            switch(selectedBet.type) {
                case 'number':
                    isWin = winningNumber.toString() === selectedBet.value;
                    break;
                case 'color':
                    if (selectedBet.value === 'red') isWin = isRed;
                    if (selectedBet.value === 'black') isWin = isBlack;
                    break;
                case 'dozen':
                    const dozen = parseInt(selectedBet.value.split('-')[0]);
                    isWin = winningNumber >= dozen && winningNumber <= dozen + 11;
                    break;
                case 'half':
                    const half = parseInt(selectedBet.value.split('-')[0]);
                    isWin = winningNumber >= half && winningNumber <= half + 17;
                    break;
                case 'even':
                    isWin = isEven;
                    break;
                case 'odd':
                    isWin = isOdd;
                    break;
                case 'column':
                    const colStart = selectedBet.value === 'col1' ? 1 : selectedBet.value === 'col2' ? 2 : 3;
                    isWin = winningNumber % 3 === colStart % 3 && winningNumber !== 0;
                    break;
            }

            // Находим угол для остановки
            const numbers = [
                '0', '32', '15', '19', '4', '21', '2', '25', '17', '34', '6',
                '27', '13', '36', '11', '30', '8', '23', '10', '5', '24', '16',
                '33', '1', '20', '14', '31', '9', '22', '18', '29', '7', '28',
                '12', '35', '3', '26'
            ];
            
            const winningIndex = numbers.indexOf(winningNumber.toString());
            const sectorAngle = 360 / 37;
            const targetAngle = winningIndex * sectorAngle;
            const spins = 5 + Math.random() * 3;
            const totalRotation = spins * 360 + targetAngle;

            // Анимация вращения
            const wheel = document.getElementById('rouletteWheel');
            wheel.style.transition = 'transform 4s cubic-bezier(0.1, 0.7, 0.1, 1)';
            wheel.style.transform = `rotate(${totalRotation}deg)`;

            setTimeout(() => {
                if (isWin) {
                    const winAmount = rouletteBet * betMultiplier;
                    state.balance += winAmount;
                    state.wins++;
                    
                    addToHistory('Рулетка', rouletteBet, winAmount, true);
                    updateAchievementProgress('rouletteKing', 1);
                    updateAchievementProgress('bigWinner', winAmount);
                    
                    updateUI();
                    saveGameState();
                    
                    showNotification('Победа!', `Выпало ${winningNumber}. Вы выиграли ${formatNumber(winAmount)} ₿`);
                } else {
                    addToHistory('Рулетка', rouletteBet, 0, false);
                    showNotification('Повезёт в следующий раз', `Выпало ${winningNumber}`, 'info');
                }
                
                spinBtn.disabled = false;
                isRouletteSpinning = false;
                
                setTimeout(() => {
                    wheel.style.transition = 'transform 0s';
                    wheel.style.transform = 'rotate(0deg)';
                    setTimeout(() => {
                        wheel.style.transition = 'transform 4s cubic-bezier(0.1, 0.7, 0.1, 1)';
                    }, 50);
                }, 1000);
            }, 4000);
        }

        // ============ БЛЕКДЖЕК ============
        let blackjackBet = 100;
        let blackjackGame = {
            deck: [],
            playerCards: [],
            dealerCards: [],
            gameActive: false,
            playerStand: false
        };

        function changeBlackjackBet(amount) {
            blackjackBet = Math.max(10, Math.min(10000, blackjackBet + amount));
            document.getElementById('blackjackBet').textContent = blackjackBet;
        }

        function createDeck() {
            const suits = ['♠', '♣', '♥', '♦'];
            const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            const deck = [];
            
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({ suit, value });
                }
            }
            
            // Тасовка колоды
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            
            return deck;
        }

        function getCardValue(card) {
            if (['J', 'Q', 'K'].includes(card.value)) return 10;
            if (card.value === 'A') return 11;
            return parseInt(card.value);
        }

        function calculateHandValue(cards) {
            let value = 0;
            let aces = 0;
            
            for (let card of cards) {
                if (card.value === 'A') {
                    aces++;
                    value += 11;
                } else {
                    value += getCardValue(card);
                }
            }
            
            // Обработка тузов
            while (value > 21 && aces > 0) {
                value -= 10;
                aces--;
            }
            
            return value;
        }

        function dealBlackjack() {
            if (state.balance < blackjackBet) {
                showNotification('Недостаточно средств', 'Пополните баланс', 'error');
                return;
            }

            // Сброс предыдущей игры
            blackjackGame = {
                deck: createDeck(),
                playerCards: [],
                dealerCards: [],
                gameActive: true,
                playerStand: false
            };

            state.balance -= blackjackBet;
            updateUI();

            // Раздача карт
            blackjackGame.playerCards.push(blackjackGame.deck.pop());
            blackjackGame.dealerCards.push(blackjackGame.deck.pop());
            blackjackGame.playerCards.push(blackjackGame.deck.pop());
            blackjackGame.dealerCards.push(blackjackGame.deck.pop());

            updateBlackjackUI();
            
            // Проверка на блекджек
            const playerValue = calculateHandValue(blackjackGame.playerCards);
            
            if (playerValue === 21) {
                endBlackjackGame('blackjack');
                return;
            }

            // Активируем кнопки управления
            document.getElementById('hitBtn').disabled = false;
            document.getElementById('standBtn').disabled = false;
            document.getElementById('doubleBtn').disabled = false;
            document.getElementById('dealBtn').disabled = true;
            document.getElementById('dealBtn').innerHTML = '<i class="fas fa-sync"></i> НОВАЯ ИГРА';
        }

        function updateBlackjackUI() {
            const playerHand = document.getElementById('playerHand');
            const dealerHand = document.getElementById('dealerHand');
            
            // Обновляем карты игрока
            playerHand.innerHTML = '';
            blackjackGame.playerCards.forEach(card => {
                const cardDiv = document.createElement('div');
                cardDiv.className = `card ${['♥', '♦'].includes(card.suit) ? 'red' : 'black'}`;
                cardDiv.innerHTML = `<div>${card.value}</div><div>${card.suit}</div>`;
                playerHand.appendChild(cardDiv);
            });
            
            // Обновляем карты дилера
            dealerHand.innerHTML = '';
            blackjackGame.dealerCards.forEach((card, index) => {
                const cardDiv = document.createElement('div');
                if (index === 0 && !blackjackGame.playerStand) {
                    cardDiv.className = 'card card-back';
                } else {
                    cardDiv.className = `card ${['♥', '♦'].includes(card.suit) ? 'red' : 'black'}`;
                    cardDiv.innerHTML = `<div>${card.value}</div><div>${card.suit}</div>`;
                }
                dealerHand.appendChild(cardDiv);
            });
            
            // Обновляем счет
            document.getElementById('playerScore').textContent = 
                blackjackGame.gameActive && !blackjackGame.playerStand ? 
                calculateHandValue(blackjackGame.playerCards) : '?';
            
            document.getElementById('dealerScore').textContent = 
                blackjackGame.playerStand ? 
                calculateHandValue(blackjackGame.dealerCards) : 
                (blackjackGame.dealerCards.length > 0 ? 
                    calculateHandValue([blackjackGame.dealerCards[0]]) : '?');
        }

        function hitCard() {
            if (!blackjackGame.gameActive) return;
            
            blackjackGame.playerCards.push(blackjackGame.deck.pop());
            updateBlackjackUI();
            
            const playerValue = calculateHandValue(blackjackGame.playerCards);
            
            if (playerValue > 21) {
                endBlackjackGame('bust');
            }
        }

        function stand() {
            if (!blackjackGame.gameActive) return;
            
            blackjackGame.playerStand = true;
            document.getElementById('hitBtn').disabled = true;
            document.getElementById('doubleBtn').disabled = true;
            
            // Дилер берет карты
            let dealerValue = calculateHandValue(blackjackGame.dealerCards);
            while (dealerValue < 17) {
                blackjackGame.dealerCards.push(blackjackGame.deck.pop());
                dealerValue = calculateHandValue(blackjackGame.dealerCards);
            }
            
            updateBlackjackUI();
            setTimeout(() => endBlackjackGame('stand'), 300);
        }

        function doubleDown() {
            if (state.balance < blackjackBet) {
                showNotification('Недостаточно средств', 'Нельзя удвоить ставку', 'error');
                return;
            }
            
            state.balance -= blackjackBet;
            updateUI();
            blackjackBet *= 2;
            document.getElementById('blackjackBet').textContent = blackjackBet;
            
            hitCard();
            if (blackjackGame.gameActive) {
                stand();
            }
        }

        function endBlackjackGame(result) {
            blackjackGame.gameActive = false;
            
            const playerValue = calculateHandValue(blackjackGame.playerCards);
            const dealerValue = calculateHandValue(blackjackGame.dealerCards);
            
            let winAmount = 0;
            let message = '';
            
            switch(result) {
                case 'blackjack':
                    winAmount = blackjackBet * 2.5;
                    message = 'БЛЭКДЖЕК!';
                    break;
                case 'bust':
                    message = 'Перебор! Вы проиграли';
                    break;
                case 'stand':
                    if (dealerValue > 21 || playerValue > dealerValue) {
                        winAmount = blackjackBet * 2;
                        message = 'Вы победили!';
                    } else if (playerValue === dealerValue) {
                        winAmount = blackjackBet;
                        message = 'Ничья! Ставка возвращена';
                    } else {
                        message = 'Дилер победил';
                    }
                    break;
            }
            
            // Обновляем UI
            updateBlackjackUI();
            document.getElementById('hitBtn').disabled = true;
            document.getElementById('standBtn').disabled = true;
            document.getElementById('doubleBtn').disabled = true;
            document.getElementById('dealBtn').disabled = false;
            
            // Обновляем баланс и историю
            if (winAmount > 0) {
                state.balance += winAmount;
                state.wins++;
                
                addToHistory('Блекджек', blackjackBet, winAmount - blackjackBet, true);
                updateAchievementProgress('blackjackPro', 1);
                updateAchievementProgress('bigWinner', winAmount - blackjackBet);
                
                showNotification('Победа!', `${message} Вы выиграли ${formatNumber(winAmount - blackjackBet)} ₿`);
            } else {
                addToHistory('Блекджек', blackjackBet, 0, false);
                showNotification('Игра окончена', message, 'info');
            }
            
            updateUI();
            saveGameState();
        }

        // ============ КОСТИ ============
        let diceBet = 100;
        let diceBetType = null;
        let diceMultiplier = 0;

        function setupDiceFaces() {
            updateDiceFace(document.getElementById('dice1'), 1);
            updateDiceFace(document.getElementById('dice2'), 1);
        }

        function changeDiceBet(amount) {
            diceBet = Math.max(10, Math.min(10000, diceBet + amount));
            document.getElementById('diceBet').textContent = diceBet;
        }

        function setDiceBetType(type) {
            diceBetType = type;
            
            let label = '';
            switch(type) {
                case 'low': label = 'Меньше 7'; diceMultiplier = 2; break;
                case '7': label = 'Ровно 7'; diceMultiplier = 5; break;
                case 'high': label = 'Больше 7'; diceMultiplier = 2; break;
            }
            
            document.getElementById('diceBetType').textContent = label;
            document.getElementById('diceMultiplier').textContent = diceMultiplier;
            
            showNotification('Ставка установлена', `${label} (×${diceMultiplier})`, 'info');
        }

        function rollDice() {
            if (!diceBetType) {
                showNotification('Выберите ставку', 'Выберите тип ставки', 'error');
                return;
            }

            if (state.balance < diceBet) {
                showNotification('Недостаточно средств', 'Пополните баланс', 'error');
                return;
            }

            state.balance -= diceBet;
            updateUI();

            // Бросаем кости
            const dice1 = Math.floor(Math.random() * 6) + 1;
            const dice2 = Math.floor(Math.random() * 6) + 1;
            const total = dice1 + dice2;

            // Анимация броска
            animateDiceRoll(dice1, dice2);

            setTimeout(() => {
                // Проверяем результат
                let isWin = false;
                switch(diceBetType) {
                    case 'low': isWin = total < 7; break;
                    case '7': isWin = total === 7; break;
                    case 'high': isWin = total > 7; break;
                }

                if (isWin) {
                    const winAmount = diceBet * diceMultiplier;
                    state.balance += winAmount;
                    state.wins++;
                    
                    addToHistory('Кости', diceBet, winAmount - diceBet, true);
                    updateAchievementProgress('diceExpert', 1);
                    updateAchievementProgress('bigWinner', winAmount - diceBet);
                    
                    updateUI();
                    saveGameState();
                    
                    showNotification('Победа!', `Выпало ${total}. Вы выиграли ${formatNumber(winAmount - diceBet)} ₿`);
                } else {
                    addToHistory('Кости', diceBet, 0, false);
                    showNotification('Повезёт в следующий раз', `Выпало ${total}`, 'info');
                }
            }, 1200);
        }

        function animateDiceRoll(dice1, dice2) {
            const diceElements = [document.getElementById('dice1'), document.getElementById('dice2')];
            const results = [dice1, dice2];
            
            diceElements.forEach((dice, index) => {
                dice.style.transition = 'transform 0.8s';
                dice.style.transform = 'rotate(360deg)';
                
                setTimeout(() => {
                    updateDiceFace(dice, results[index]);
                    dice.style.transform = 'rotate(0deg)';
                }, 400);
                
                setTimeout(() => {
                    dice.style.transition = 'none';
                }, 1200);
            });
        }

        function updateDiceFace(diceElement, value) {
            diceElement.innerHTML = '';
            
            const dotPositions = {
                1: [[1, 1]],
                2: [[0, 0], [2, 2]],
                3: [[0, 0], [1, 1], [2, 2]],
                4: [[0, 0], [0, 2], [2, 0], [2, 2]],
                5: [[0, 0], [0, 2], [1, 1], [2, 0], [2, 2]],
                6: [[0, 0], [0, 1], [0, 2], [2, 0], [2, 1], [2, 2]]
            };
            
            dotPositions[value].forEach(pos => {
                const dot = document.createElement('div');
                dot.className = 'dot';
                dot.style.gridColumn = pos[0] + 1;
                dot.style.gridRow = pos[1] + 1;
                diceElement.appendChild(dot);
            });
            
            document.getElementById('diceResult').textContent = value;
        }

        // ============ ИСТОРИЯ ============
        function addToHistory(game, bet, win, isWin) {
            const historyEntry = {
                date: new Date().toLocaleString('ru-RU'),
                game,
                bet,
                win,
                isWin
            };
            
            state.gameHistory.unshift(historyEntry);
            
            if (state.gameHistory.length > 30) {
                state.gameHistory.pop();
            }
            
            saveGameState();
            loadHistory();
        }

        function loadHistory() {
            const tableBody = document.getElementById('historyTable');
            tableBody.innerHTML = '';
            
            state.gameHistory.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${entry.game}</td>
                    <td>${formatNumber(entry.bet)} ₿</td>
                    <td class="${entry.isWin ? 'result-win' : 'result-loss'}">
                        ${entry.isWin ? 'Победа' : 'Поражение'}
                    </td>
                    <td>${entry.isWin ? '+' + formatNumber(entry.win) + ' ₿' : '-'}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // ============ ДОСТИЖЕНИЯ ============
        function updateAchievementProgress(achievementId, progress) {
            if (state.achievements[achievementId] && !state.achievements[achievementId].unlocked) {
                state.achievements[achievementId].progress += progress;
                
                if (state.achievements[achievementId].progress >= state.achievements[achievementId].target) {
                    state.achievements[achievementId].unlocked = true;
                    state.achievements[achievementId].progress = state.achievements[achievementId].target;
                    
                    let reward = 0;
                    switch(achievementId) {
                        case 'firstWin': reward = 1000; break;
                        case 'bigWinner': reward = 5000; break;
                        case 'slotsMaster': reward = 2000; break;
                        case 'rouletteKing': reward = 2000; break;
                        case 'blackjackPro': reward = 3000; break;
                        case 'diceExpert': reward = 2000; break;
                        case 'depositMade': reward = 1000; break;
                    }
                    
                    state.balance += reward;
                    updateUI();
                    showNotification('Достижение разблокировано!', `+${formatNumber(reward)} ₿`, 'success');
                }
                
                saveGameState();
                loadAchievements();
            }
        }

        function loadAchievements() {
            const grid = document.getElementById('achievementsGrid');
            grid.innerHTML = '';
            
            const achievements = [
                { id: 'firstWin', title: 'Первая победа', desc: 'Одержите первую победу в казино', icon: 'fa-star' },
                { id: 'bigWinner', title: 'Крупный выигрыш', desc: 'Выиграйте 10,000 ₿ всего', icon: 'fa-trophy' },
                { id: 'slotsMaster', title: 'Мастер слотов', desc: 'Сыграйте 100 раз в слоты', icon: 'fa-slot-machine' },
                { id: 'rouletteKing', title: 'Король рулетки', desc: 'Сыграйте 50 раз в рулетку', icon: 'fa-dharmachakra' },
                { id: 'blackjackPro', title: 'Профи блекджека', desc: 'Сыграйте 25 раз в блекджек', icon: 'fa-club' },
                { id: 'diceExpert', title: 'Эксперт костей', desc: 'Сыграйте 50 раз в кости', icon: 'fa-dice' },
                { id: 'depositMade', title: 'Первое пополнение', desc: 'Пополните баланс через Telegram бота', icon: 'fa-coins' }
            ];
            
            achievements.forEach(ach => {
                const achievement = state.achievements[ach.id];
                const progressPercent = (achievement.progress / achievement.target) * 100;
                
                const card = document.createElement('div');
                card.className = `achievement-card ${achievement.unlocked ? '' : 'locked'}`;
                card.innerHTML = `
                    <div class="achievement-icon">
                        <i class="fas ${ach.icon}"></i>
                    </div>
                    <div class="achievement-info">
                        <h4>${ach.title}</h4>
                        <p>${ach.desc}</p>
                        <div class="achievement-progress">
                            <div class="progress-bar" style="width: ${progressPercent}%"></div>
                        </div>
                        <div style="font-size: 10px; margin-top: 4px;">
                            ${achievement.progress}/${achievement.target} 
                            ${achievement.unlocked ? '✔ Разблокировано' : ''}
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Отладка
        window.getGameState = () => state;
        window.resetGame = () => {
            if (confirm('Сбросить весь прогресс?')) {
                localStorage.removeItem('casinoState');
                location.reload();
            }
        };
        
        // Для тестирования пополнения
        window.testDeposit = (coins = 1000) => {
            state.balance += coins;
            updateUI();
            saveGameState();
            showNotification('Тест пополнения', `+${coins} ₿ добавлено на баланс`, 'success');
        };
    </script>
</body>
</html>

